{"id":"vanilla-mafia-1","title":"Phase 1: Project Setup & Core Models","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:19:42.490604481+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:40:27.908880554+07:00","closed_at":"2026-02-19T14:40:27.908880554+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-10","title":"Create all models with validations and associations","description":"Implement Player, Game, Rating, Role, Award, PlayerAward models with validations, associations, scopes, computed attributes","status":"closed","priority":0,"issue_type":"task","assignee":"Denis Kiselev","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.509328119+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T19:20:49.939998347+07:00","closed_at":"2026-02-17T19:20:49.939998347+07:00","dependencies":[{"issue_id":"vanilla-mafia-10","depends_on_id":"vanilla-mafia-9","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-11","title":"Write model specs","description":"Write RSpec tests for all model validations, associations, scopes, and computed attributes using Shoulda Matchers","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.594022895+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T23:25:34.42884595+07:00","closed_at":"2026-02-17T23:25:34.42884595+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-11","depends_on_id":"vanilla-mafia-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-12","title":"Seed roles dictionary and sample data","description":"Create db/seeds.rb with role codes (peace, mafia, don, sheriff) and sample admin user","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.67618171+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:28:39.285817735+07:00","closed_at":"2026-02-19T14:28:39.285817735+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-12","depends_on_id":"vanilla-mafia-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-13","title":"Write acceptance tests for public pages","description":"Write Capybara acceptance tests for season overview, game details, player profile, series totals, hall of fame","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.080079106+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T12:19:25.377941112+07:00","closed_at":"2026-02-18T12:19:25.377941112+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-13","depends_on_id":"vanilla-mafia-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-14","title":"Implement SeasonsController#show","description":"Season overview page with games grouped by series and player rankings sorted by total rating","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.167134763+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T13:02:37.65282088+07:00","closed_at":"2026-02-18T13:02:37.65282088+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-14","depends_on_id":"vanilla-mafia-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-15","title":"Implement GamesController#show","description":"Game details page with rating table showing all players, roles, scores","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.248773999+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T14:17:01.760683725+07:00","closed_at":"2026-02-18T14:17:01.760683725+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-15","depends_on_id":"vanilla-mafia-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-16","title":"Implement PlayersController#show","description":"Player profile with per-season breakdown, game history, awards section","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.331463238+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T15:17:44.201976168+07:00","closed_at":"2026-02-18T15:17:44.201976168+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-16","depends_on_id":"vanilla-mafia-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-17","title":"Implement SeriesController#show","description":"Series totals matrix table: rows=players, columns=games+total, sorted by total desc","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.415054871+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T16:11:30.53133395+07:00","closed_at":"2026-02-18T16:11:30.53133395+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-17","depends_on_id":"vanilla-mafia-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-18","title":"Implement HallOfFameController#show","description":"Hall of fame with awarded players, photos, decorative frames, staff section","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.499047983+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:26:43.253960068+07:00","closed_at":"2026-02-19T14:26:43.253960068+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-18","depends_on_id":"vanilla-mafia-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-19","title":"Build responsive layout with Tailwind CSS","description":"Mobile-first responsive layout replacing table-based layout. Semantic HTML5, CSS Grid/Flexbox","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.580971318+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T13:41:12.521629677+07:00","closed_at":"2026-02-20T13:41:12.521629677+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-2","title":"Phase 2: Public Pages","description":"Implement all public-facing pages with acceptance tests, service objects, and responsive Tailwind CSS layout","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:19:48.89463196+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:40:28.04487815+07:00","closed_at":"2026-02-19T14:40:28.04487815+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-20","title":"Implement service objects for each page","description":"SeasonOverviewService, PlayerProfileService, SeriesAggregationService, HallOfFameService","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.663578862+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T15:38:17.068202268+07:00","closed_at":"2026-02-19T15:38:17.068202268+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-20","depends_on_id":"vanilla-mafia-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-21","title":"Write request specs for all controllers","description":"Request specs for seasons, games, players, series, hall_of_fame controllers","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:21.744747384+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:39:34.827615303+07:00","closed_at":"2026-02-19T14:39:34.827615303+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-22","title":"Set up admin framework","description":"Choose and configure ActiveAdmin, Administrate, or Avo for the admin panel","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.021193884+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T21:07:04.394869331+07:00","closed_at":"2026-02-20T21:07:04.394869331+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-22","depends_on_id":"vanilla-mafia-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-23","title":"Write acceptance tests for admin CRUD","description":"Capybara tests for managing players, games, ratings, awards in admin panel","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.102153143+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-21T11:02:25.757672938+07:00","closed_at":"2026-02-21T11:02:25.757672938+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-23","depends_on_id":"vanilla-mafia-22","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-24","title":"Implement admin CRUD for Players","description":"Admin CRUD for players with photo upload via Active Storage","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.183605172+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T21:07:04.49131633+07:00","closed_at":"2026-02-20T21:07:04.49131633+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-25","title":"Implement admin CRUD for Games with nested ratings","description":"Admin CRUD for games with inline rating management (nested forms)","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.276250516+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T21:07:04.590970678+07:00","closed_at":"2026-02-20T21:07:04.590970678+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-26","title":"Implement admin CRUD for Awards","description":"Admin CRUD for awards with icon upload via Active Storage","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.359892206+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T21:07:04.681726295+07:00","closed_at":"2026-02-20T21:07:04.681726295+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-27","title":"Implement admin Player-Award assignments","description":"Admin interface for assigning awards to players with season and ordering","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.443794396+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T21:07:04.781882346+07:00","closed_at":"2026-02-20T21:07:04.781882346+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-28","title":"Add Pundit policies for all admin actions","description":"Create Pundit policies ensuring only admin users can access admin panel","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.524968729+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T22:36:42.112302733+07:00","closed_at":"2026-02-20T22:36:42.112302733+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-29","title":"Write request specs for admin endpoints","description":"Request specs testing authentication and authorization on all admin routes","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:32.609048682+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-21T00:09:14.066018548+07:00","closed_at":"2026-02-21T00:09:14.066018548+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-3","title":"Phase 3: Admin Panel","description":"Set up admin framework with CRUD for Players, Games, Ratings, Awards. Nested forms, image uploads, Pundit policies.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:19:56.280599369+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-21T11:02:35.73303419+07:00","closed_at":"2026-02-21T11:02:35.73303419+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-30","title":"Error handling (404, 422, 500 pages)","description":"Custom error pages, rescue_from in ApplicationController","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:41.871913519+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-21T11:23:05.635759484+07:00","closed_at":"2026-02-21T11:23:05.635759484+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-31","title":"Pagination where needed","description":"Add kaminari or pagy for pagination on player/game lists","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:41.955449516+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:41.955449516+07:00"}
{"id":"vanilla-mafia-32","title":"Performance optimization","description":"Eager loading, caching, database index verification","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:42.040792883+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:42.040792883+07:00"}
{"id":"vanilla-mafia-33","title":"Docker configuration","description":"Dockerfile and docker-compose.yml for development and production","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:42.124263955+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T19:42:07.71650081+07:00","closed_at":"2026-02-26T19:42:07.71650081+07:00","close_reason":"Dockerfile and .dockerignore already in place; docker-compose for dev not needed","dependencies":[{"issue_id":"vanilla-mafia-33","depends_on_id":"vanilla-mafia-35","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-34","title":"GitHub Actions CI pipeline","description":"CI workflow: lint (rubocop), test (rspec), security (brakeman, bundler-audit)","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:42.208162018+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T19:51:29.107484094+07:00","closed_at":"2026-02-26T19:51:29.107484094+07:00","close_reason":"CI pipeline already configured in .github/workflows/ci.yml — lint, test, and security scanning all in place."}
{"id":"vanilla-mafia-35","title":"Production configuration","description":"Rails encrypted credentials, logging, caching config","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:42.293157247+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-25T15:40:06.264850952+07:00","closed_at":"2026-02-25T15:40:06.264850952+07:00","close_reason":"PR #39 - configured SSL, Hetzner VPS IP, force_ssl"}
{"id":"vanilla-mafia-36","title":"Data migration from old PostgreSQL database","description":"Rake task to import data from old chimafia PostgreSQL database into new SQLite schema","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:42.378230998+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-22T13:47:02.268744389+07:00","closed_at":"2026-02-22T13:47:02.268744389+07:00","close_reason":"Implemented web scraper for data import. PR #32"}
{"id":"vanilla-mafia-37","title":"Fix CI: exclude pending acceptance tests from test job","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-18T10:14:52.994570352+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-18T12:19:25.464605346+07:00","closed_at":"2026-02-18T12:19:25.464605346+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-38","title":"Re-include acceptance tests in CI after views are implemented","description":"Remove the spec/acceptance/ exclusion from .github/workflows/ci.yml once all 5 public page views are done (vanilla-mafia-14 through 18). All 22 acceptance tests must pass in CI.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-18T12:13:28.843802182+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-19T14:33:11.192994851+07:00","closed_at":"2026-02-19T14:33:11.192994851+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-38","depends_on_id":"vanilla-mafia-14","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-38","depends_on_id":"vanilla-mafia-15","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-38","depends_on_id":"vanilla-mafia-16","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-38","depends_on_id":"vanilla-mafia-17","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-38","depends_on_id":"vanilla-mafia-18","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-39","title":"Refactor specs to use let declarations and contexts","description":"Tech debt: refactor existing RSpec tests to use let/let! declarations and nested context blocks instead of inline variable declarations inside test bodies. This improves readability, reduces duplication, and follows RSpec best practices.","status":"closed","priority":3,"issue_type":"chore","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-18T12:52:13.040965046+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T13:41:02.648628515+07:00","closed_at":"2026-02-20T13:41:02.648628515+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-4","title":"Phase 4: Polish & Deployment","description":"Error handling, pagination, performance optimization, Docker, CI/CD, production config, data migration from old PostgreSQL database.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:19:56.365347331+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:19:56.365347331+07:00"}
{"id":"vanilla-mafia-40","title":"Add test-prof gem and use let_it_be in specs","description":"Install the test-prof gem and prefer let_it_be over let!/let for test data that does not need to be recreated per example. This reduces test suite runtime by creating records once per describe/context group. Update development instructions in .claude-on-rails/context.md accordingly.","status":"closed","priority":3,"issue_type":"chore","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-18T12:57:49.534153984+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-20T13:41:12.601444456+07:00","closed_at":"2026-02-20T13:41:12.601444456+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-41","title":"Choose deployment platform","description":"Evaluate and choose a hosting platform for production deployment (e.g., Hetzner, DigitalOcean, Railway, Fly.io, Render). Consider: cost, SQLite compatibility, ease of deployment, SSL, custom domains.","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-21T10:56:22.577876088+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-25T15:23:25.224970771+07:00","closed_at":"2026-02-25T15:23:25.224970771+07:00","close_reason":"Hetzner VPS chosen as deployment platform (with both IPv4 and IPv6)"}
{"id":"vanilla-mafia-42","title":"Configure deployment pipeline","description":"Set up automated deployment from GitHub Actions (CD). Includes:\n- GitHub Actions workflow triggered on push to master (or tag creation)\n- Build Docker image and push to ghcr.io\n- Run kamal deploy from the CI runner\n- Fix .kamal/secrets to support both local (gh CLI) and CI (GITHUB_TOKEN) auth\n- Database migrations, health checks, zero-downtime deploys\n- DEPLOY_SERVER passed as a GitHub Actions secret","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-21T10:56:27.365837697+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T20:52:09.444864867+07:00","closed_at":"2026-02-26T20:52:09.444864867+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-42","depends_on_id":"vanilla-mafia-41","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-42","depends_on_id":"vanilla-mafia-33","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-42","depends_on_id":"vanilla-mafia-69","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-43","title":"Claim Player Profile feature","description":"Allow registered users to claim a player profile (1:1 link). Includes: pending/approved flow, profile editing (comment + photo), Avo admin for reviewing claims. Full plan in transcript dd1d4d90.","status":"open","priority":1,"issue_type":"feature","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:11:47.530787474+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:11:47.530787474+07:00"}
{"id":"vanilla-mafia-44","title":"Migrations + config initializer for player claims","description":"Create two migrations: (1) add_player_id_to_users — add_reference :users, :player with unique index, null: true, foreign_key: true. (2) create_player_claims — table with user/player refs, status (pending/approved/rejected), rejection_reason, reviewed_by, reviewed_at, plus unique index on [user_id, player_id] and index on status. Also create config/initializers/player_claims.rb with require_approval = true setting.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:11:55.145185655+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T12:33:50.560842112+07:00","closed_at":"2026-02-23T12:33:50.560842112+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-45","title":"PlayerClaim model + factory + specs + mutant","description":"Create PlayerClaim model with: belongs_to :user, belongs_to :player, belongs_to :reviewed_by (User, optional). Validates status inclusion in %w[pending approved rejected], uniqueness of [user_id, player_id]. Custom validations: user has no existing claimed player, player not already claimed. Scopes: .pending, .approved. Status predicates: pending?, approved?, rejected?. Class method: .require_approval? reading from Rails config. Add factory in spec/factories/player_claims.rb (default status pending). Write model specs and run mutant for zero surviving mutants.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:11:59.730151871+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T10:12:39.157343795+07:00","closed_at":"2026-02-28T10:12:39.157343795+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-45","depends_on_id":"vanilla-mafia-44","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-46","title":"User + Player model updates for claims","description":"User model: add belongs_to :player (optional), has_many :player_claims (dependent: destroy), validates :player_id uniqueness (allow_nil). Helpers: claimed_player?, pending_claim?, pending_claim_for(player). Player model: add has_one :user, has_many :player_claims (dependent: destroy). Helpers: claimed?, claimed_by?(user). Update existing specs and run mutant.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:02.377071517+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T10:12:38.375953675+07:00","closed_at":"2026-02-28T10:12:38.375953675+07:00","close_reason":"Closed","dependencies":[{"issue_id":"vanilla-mafia-46","depends_on_id":"vanilla-mafia-44","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-47","title":"ClaimPlayerService + ReviewClaimService","description":"ClaimPlayerService: follows Data.define + .call pattern. Returns Result(success, claim, error). Logic: if user already has player → error :already_has_player; if player already claimed → error :player_already_claimed; if require_approval? AND user is NOT admin → create pending PlayerClaim; if user IS admin OR approval not required → transaction: create approved PlayerClaim + set user.player_id. ReviewClaimService: two class methods .approve(claim:, admin:) and .reject(claim:, admin:, reason:). Approve: transaction, update claim status + set user.player_id. Reject: update claim status + store rejection reason. Write service specs and run mutant.","status":"in_progress","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:06.911542658+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T10:14:52.477232197+07:00","dependencies":[{"issue_id":"vanilla-mafia-47","depends_on_id":"vanilla-mafia-45","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-47","depends_on_id":"vanilla-mafia-46","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-48","title":"Pundit policies for claims + profile","description":"PlayerClaimPolicy: create? — user present, not already claimed, no pending claim. index?/show?/update?/destroy? — admin only (for Avo). ProfilePolicy: edit?/update? — user owns the player (user.player_id == player.id). Write policy specs.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:10.31443559+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:12:10.31443559+07:00","dependencies":[{"issue_id":"vanilla-mafia-48","depends_on_id":"vanilla-mafia-47","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-49","title":"Flash messages + auth links in layout","description":"Layout changes in app/views/layouts/application.html.erb: (1) Flash messages — add before yield in main: green for notice, red for alert, Tailwind-styled, auto-dismiss. (2) Auth links in both sidebar nav and mobile nav: signed in → Выйти (sign out, turbo_method: :delete); not signed in → Войти (sign in link). (3) Admin link: signed-in admin → Админка link to /avo, visible in both sidebar and mobile nav. Use i18n keys nav.sign_in / nav.sign_out / nav.admin.","status":"in_progress","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:13.604128583+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T19:07:12.872330772+07:00","dependencies":[{"issue_id":"vanilla-mafia-49","depends_on_id":"vanilla-mafia-75","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-5","title":"Configure RSpec, FactoryBot, Capybara, SimpleCov","description":"Install testing gems, run rspec:install, configure rails_helper.rb with FactoryBot, Shoulda Matchers, SimpleCov, DatabaseCleaner","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.088215309+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:55.503882811+07:00","closed_at":"2026-02-17T13:20:55.503882811+07:00"}
{"id":"vanilla-mafia-50","title":"PlayerClaimsController + routes + request specs","description":"Routes: resources :players, only: [:show] do; resource :claim, only: [:create], controller: 'player_claims'; end. Controller: before_action :authenticate_user\\!, create action finds Player, calls ClaimPlayerService, redirects back with flash. Write request specs covering: auth guard, claim with/without approval, duplicate claims.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:16.829681564+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:12:16.829681564+07:00","dependencies":[{"issue_id":"vanilla-mafia-50","depends_on_id":"vanilla-mafia-48","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-50","depends_on_id":"vanilla-mafia-49","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-51","title":"ProfilesController + edit view + request specs","description":"Routes: resource :profile, only: [:edit, :update]. Controller: before_action :authenticate_user!, before_action :ensure_claimed_player (redirects if current_user.player_id nil). edit: loads current_user.player. update: updates comment and photo via strong params, redirects to player show. View: simple form with comment textarea, photo file field with current preview, submit button, error display. Write request specs covering: auth guard, no claimed player redirect, edit/update happy path.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:20.444759025+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:12:20.444759025+07:00","dependencies":[{"issue_id":"vanilla-mafia-51","depends_on_id":"vanilla-mafia-48","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-51","depends_on_id":"vanilla-mafia-49","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-51","depends_on_id":"vanilla-mafia-76","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-52","title":"Player show view: claim button + edit link","description":"Add conditional block after h1 on player show page: (1) User owns this player → Редактировать профиль link to edit_profile_path. (2) Unclaimed player, user eligible → Это мой профиль button_to with Turbo confirm. (3) User has pending claim for this player → Ваша заявка ожидает подтверждения text. (4) Otherwise → nothing. Use i18n keys under players.show.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:23.822288128+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:12:23.822288128+07:00","dependencies":[{"issue_id":"vanilla-mafia-52","depends_on_id":"vanilla-mafia-50","type":"blocks","created_at":"0001-01-01T00:00:00Z"},{"issue_id":"vanilla-mafia-52","depends_on_id":"vanilla-mafia-51","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-53","title":"Avo admin for PlayerClaims","description":"Avo::Resources::PlayerClaim: fields for user (belongs_to), player (belongs_to), status (badge: pending=warning, approved=success, rejected=danger), rejection_reason, reviewed_by, reviewed_at. Avo actions: ApproveClaim — visible when pending, calls ReviewClaimService.approve. RejectClaim — visible when pending, has optional rejection_reason field, calls ReviewClaimService.reject. Update existing Avo resources: User — add field :player as :belongs_to. Player — add field :user as :has_one.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:28.008735492+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T00:12:28.008735492+07:00","dependencies":[{"issue_id":"vanilla-mafia-53","depends_on_id":"vanilla-mafia-47","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-54","title":"i18n keys for player claims feature","description":"Add Russian locale keys to config/locales/ru.yml: nav.sign_in / nav.sign_out / nav.admin, player_claims.create.pending / .approved / .errors.*, players.show.claim_player / .claim_confirm / .claim_pending / .edit_profile, profiles.edit.title / .save / .name_label / .name_hint, profiles.update.success, profiles.errors.no_claimed_player, devise.registrations/sessions/passwords keys as needed for custom views.","status":"in_progress","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T00:12:29.673475365+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T19:19:46.969739366+07:00"}
{"id":"vanilla-mafia-55","title":"Dispute an already-claimed player profile","description":"Allow a user to dispute a player profile that was already claimed by another user. This would let the real person reclaim their profile if someone else claimed it first. Design TBD — possibly creates a special dispute claim that notifies admins for manual resolution.","status":"open","priority":4,"issue_type":"feature","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T11:46:37.108003975+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T11:46:37.108003975+07:00"}
{"id":"vanilla-mafia-56","title":"Fix SQL injection in import rake task","description":"PR #32 review: table name interpolated directly into SQL in import.rake:161. Use ActiveRecord's reset_pk_sequence\\! or sanitize the table name. Security issue.","status":"closed","priority":1,"issue_type":"bug","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:30.595711378+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:40:32.291128112+07:00","closed_at":"2026-02-23T13:40:32.291128112+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-57","title":"Validate content type and base64 in scrapers","description":"PR #32 review: (1) player_scraper.rb:27 and import.rake:210 — content_type from scraped data used without validation, should whitelist image types. (2) player_scraper.rb:29 and import.rake:211 — use Base64.strict_decode64 instead of decode64 to catch invalid input.","status":"open","priority":2,"issue_type":"bug","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:32.588754447+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:32.588754447+07:00"}
{"id":"vanilla-mafia-58","title":"Add HTTP timeouts and error handling to scraper","description":"PR #32 review: (1) base.rb:13 — no explicit timeouts on Net::HTTP requests, could hang indefinitely across ~320 requests. Add open_timeout and read_timeout. (2) base.rb:21 — no rescue for network errors (SocketError, Timeout::Error, Errno::ECONNREFUSED). Wrap in rescue block.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:35.059421648+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:35.059421648+07:00"}
{"id":"vanilla-mafia-59","title":"Improve scraper parsing robustness","description":"PR #32 review: (1) hall_scraper.rb:110 — fragile DOM parsing for staff section, use more robust selectors like heading text lookup. (2) game_scraper.rb:59 — unmapped roles silently produce nil role_code, should log warning and skip. (3) season_scraper.rb:39 — played_on stored as raw string without date parsing/validation.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:38.011802454+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:38.011802454+07:00"}
{"id":"vanilla-mafia-6","title":"Configure Devise for admin authentication","description":"Install Devise, generate User model with admin flag, configure mailer defaults","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.165128401+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:55.582404344+07:00","closed_at":"2026-02-17T13:20:55.582404344+07:00"}
{"id":"vanilla-mafia-60","title":"Make scraper season range configurable","description":"PR #32 review: season_scraper.rb:6 — seasons 1-5 hardcoded in loop. Make configurable via parameter or environment variable, or implement dynamic season discovery.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:39.864504635+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:39.864504635+07:00"}
{"id":"vanilla-mafia-61","title":"Scraper minor cleanup","description":"PR #32 review minor items: (1) import.rake:5 — add explicit require for stringio and base64. (2) base.rb:33 — use BigDecimal instead of to_f for decimal parsing to match DB column type. (3) game_scraper.rb:36 — remove unnecessary /i flag on Cyrillic regex. (4) import.rake:81 — move Active Storage file attachments outside DB transaction.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:42.311972498+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:42.311972498+07:00"}
{"id":"vanilla-mafia-62","title":"Add test coverage for scraper classes","description":"PR #32 review: lib/scraper/ classes have no tests. Add specs with sample HTML fixtures to verify parsing logic, error handling, and data transformations for BaseScraper, SeasonScraper, GameScraper, PlayerScraper, and HallScraper.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:13:45.043989972+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:13:45.043989972+07:00"}
{"id":"vanilla-mafia-63","title":"DB-backed application settings model","description":"Create a Setting model for runtime-configurable application settings, editable via Avo admin. Key/value store (e.g. key: string, value: string) with type casting helpers. Replace config/initializers/player_claims.rb with a DB-backed setting so admins can toggle require_approval without restarting the app. Include Avo resource for managing settings.","status":"open","priority":3,"issue_type":"feature","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:31:45.882667379+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:31:45.882667379+07:00"}
{"id":"vanilla-mafia-64","title":"Migrate player_claims.require_approval to DB setting","description":"Once vanilla-mafia-63 (Setting model) is done, migrate the require_approval toggle from config/initializers/player_claims.rb to a DB-backed setting. Update PlayerClaim.require_approval? to read from Setting instead of Rails.application.config. Remove the initializer.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-23T13:31:52.609778376+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-23T13:31:52.609778376+07:00","dependencies":[{"issue_id":"vanilla-mafia-64","depends_on_id":"vanilla-mafia-63","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-65","title":"Configure backup from Hetzner to local or OneDrive cloud","description":"Set up automated backups of the Hetzner-hosted application (database and assets) to either local storage or OneDrive cloud. Evaluate both options and implement the most suitable one.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-25T14:49:01.001650107+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-25T14:49:01.001650107+07:00"}
{"id":"vanilla-mafia-66","title":"Configure email/SMTP provider for production","description":"Choose and configure an email provider (e.g., Mailgun, Postmark, SendGrid) for transactional emails in production. Set up Rails Action Mailer with SMTP credentials in encrypted credentials.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-25T15:33:46.015970885+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-25T15:33:46.015970885+07:00"}
{"id":"vanilla-mafia-67","title":"Choose Docker registry for production images","description":"Evaluate Docker registry options (Docker Hub, GitHub Container Registry, Hetzner Container Registry) and configure Kamal deploy.yml accordingly. Consider: cost, ease of setup, integration with CI/CD.","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-25T15:33:47.786960881+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-25T16:00:39.07222261+07:00","closed_at":"2026-02-25T16:00:39.07222261+07:00","close_reason":"PR #40 - ghcr.io configured as Docker registry"}
{"id":"vanilla-mafia-68","title":"Choose and configure domain name","description":"Pick a domain name for the production app. Update config/deploy.yml (proxy.host) and config/environments/production.rb (action_mailer.default_url_options) — both currently have app.example.com as placeholder.","notes":"Postponing domain name — using Hetzner IP (46.62.146.40) directly for initial deploy. Will revisit domain + SSL later.","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-25T15:38:57.671065228+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T19:48:34.585728407+07:00","closed_at":"2026-02-26T19:48:34.585728407+07:00","close_reason":"Deferred — using IP address for initial deploy. Will revisit domain + SSL later."}
{"id":"vanilla-mafia-69","title":"Set up GitHub PAT for ghcr.io on Hetzner VPS","description":"Before first Kamal deploy, the Hetzner VPS needs a way to authenticate with ghcr.io. Either install gh CLI on the server or switch .kamal/secrets to use an environment variable with a GitHub PAT (write:packages scope). Currently .kamal/secrets uses gh config get which only works locally.","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-25T16:06:02.497291058+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T19:48:26.438243959+07:00","closed_at":"2026-02-26T19:48:26.438243959+07:00","close_reason":"Folded into vanilla-mafia-42 — the real issue is CI runner auth, not VPS auth. Kamal handles docker login on the server automatically."}
{"id":"vanilla-mafia-7","title":"Configure Pundit for authorization","description":"Install Pundit, generate base ApplicationPolicy, create admin policy","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.250495811+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:55.659070861+07:00","closed_at":"2026-02-17T13:20:55.659070861+07:00"}
{"id":"vanilla-mafia-70","title":"Wire ADMIN_EMAIL and ADMIN_PASSWORD through Kamal deploy","description":"Add admin credentials to deploy workflow env, .kamal/secrets, and config/deploy.yml so the production container receives them for db:seed.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-26T22:53:55.823661449+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-26T22:54:23.354880615+07:00","closed_at":"2026-02-26T22:54:23.354880615+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-71","title":"Investigate SQLite database persistence across deploys","description":"SQLite database may be created inside the Docker image instead of on the mounted volume, which would cause data loss on every deploy. Verify that the database files are stored in the vanilla_mafia_storage volume (mounted at /rails/storage) and not in the default Rails db/ directory inside the container.","status":"closed","priority":1,"issue_type":"bug","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T11:35:11.26349425+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T13:49:47.738637309+07:00","closed_at":"2026-02-27T13:49:47.738637309+07:00","close_reason":"Verified: storage/ is mounted as a Docker named volume (vanilla_mafia_storage:/rails/storage). All SQLite databases are on the persistent volume and survive deploys."}
{"id":"vanilla-mafia-72","title":"Get domain name and configure DNS + SSL","description":"Choose and register a domain name, point DNS to the Hetzner VPS (46.62.146.40), then re-enable the proxy config in config/deploy.yml with ssl: true and the real host. Also re-enable config.assume_ssl and config.force_ssl in production.rb if not already set.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T13:41:58.785091003+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T13:41:58.785091003+07:00"}
{"id":"vanilla-mafia-73","title":"Fix Kamal secrets parser incompatibility for ADMIN_EMAIL/ADMIN_PASSWORD","description":"The .kamal/secrets file uses ${ADMIN_EMAIL:-} and ${ADMIN_PASSWORD:-} syntax inside $(…) blocks. Kamal's parser does NOT support ${VAR:-fallback} bash syntax, causing empty/garbage values to reach the container. This breaks db:seed and import:scrape. Fix: simplify to $(printenv ADMIN_EMAIL) and $(printenv ADMIN_PASSWORD) pattern.","status":"closed","priority":1,"issue_type":"bug","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T14:14:42.094852574+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T15:00:23.427875205+07:00","closed_at":"2026-02-27T15:00:23.427875205+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-74","title":"Exclude test gems from production Docker image","description":"Dockerfile sets BUNDLE_WITHOUT=development but does not exclude the test group. This installs capybara, selenium-webdriver, mutant-rspec, simplecov, and many other test-only gems in the production image unnecessarily. Fix: change to BUNDLE_WITHOUT=development:test.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T14:39:27.042913742+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T15:00:23.711387272+07:00","closed_at":"2026-02-27T15:00:23.711387272+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-75","title":"Custom Devise views with Tailwind styling","description":"Generate custom Devise views (rails generate devise:views) and restyle them to match the site's dark Tailwind design. Covers: sessions/new (login), registrations/new (register), registrations/edit (account settings), passwords/new (forgot password), passwords/edit (reset password). Each view should use consistent form styling with the rest of the app. No need for confirmable/lockable/omniauth views since those modules are not enabled.","status":"in_progress","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T16:00:24.260185609+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T16:53:36.645793951+07:00","dependencies":[{"issue_id":"vanilla-mafia-75","depends_on_id":"vanilla-mafia-54","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"vanilla-mafia-76","title":"Allow claimed player name editing with uniqueness validation","description":"The Player.name field serves as the player's nickname. When a user claims a player, they should be able to edit the name via their profile page (vanilla-mafia-51). Add validates :name, uniqueness: true to Player model (if not already present). The profile edit form should include the name field. This ties into vanilla-mafia-51 (ProfilesController) which already handles the edit view.","status":"closed","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T16:00:27.717956671+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T11:55:27.7187327+07:00","closed_at":"2026-02-28T11:55:27.7187327+07:00","close_reason":"Closed"}
{"id":"vanilla-mafia-77","title":"Refactor hardcoded season navigation to be dynamic","description":"The layout currently hardcodes seasons 1..5 in both the sidebar and mobile nav. This should be dynamic — either query Season/Game for distinct seasons or use a helper. When season 6 starts, the nav should update automatically.","status":"open","priority":3,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T16:00:30.06904689+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T16:00:30.06904689+07:00"}
{"id":"vanilla-mafia-78","title":"Add English locale keys for custom Devise views","description":"The custom Devise views (sessions/new, registrations/new, registrations/edit, passwords/new, passwords/edit) use i18n keys like devise.sessions.new.title, devise.registrations.new.title, etc. Russian translations exist in config/locales/devise.ru.yml but the English equivalents are missing from config/locales/devise.en.yml. Add the matching English keys so views render correctly when locale is :en.","status":"open","priority":1,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-27T18:29:47.540596881+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-27T18:29:47.540596881+07:00"}
{"id":"vanilla-mafia-79","title":"Re-enable assume_ssl and force_ssl after HTTPS is configured","description":"Once a real domain with HTTPS is pointed at the server, uncomment config.assume_ssl, config.force_ssl, and config.ssl_options in config/environments/production.rb. Also re-enable the SSL proxy in config/deploy.yml (see commit d48338d). These were disabled because Secure cookies break CSRF over plain HTTP (PR #88).","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-28T00:32:04.315062526+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T00:32:04.315062526+07:00"}
{"id":"vanilla-mafia-8","title":"Configure I18n with Russian locale","description":"Set default locale to :ru, create config/locales/ru.yml with all model attributes and page strings","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.332524233+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:20:55.738066505+07:00","closed_at":"2026-02-17T13:20:55.738066505+07:00"}
{"id":"vanilla-mafia-80","title":"Switch deploy runner to ARM to eliminate QEMU emulation","description":"The deploy workflow runs on ubuntu-latest (x86_64) but builds arm64 images for the Hetzner ARM VPS. This forces QEMU emulation, which is 5-10x slower than native and requires -j 1 workarounds for bootsnap. Switch to ubuntu-24.04-arm runner in .github/workflows/deploy.yml to build natively. Expected to save ~10 minutes per deploy.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-28T00:49:38.452489018+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T00:49:38.452489018+07:00"}
{"id":"vanilla-mafia-81","title":"Add Docker layer caching to deploy workflow","description":"Every deploy rebuilds all Docker layers from scratch (apt-get, bundle install, bootsnap precompile, assets:precompile). Add Docker build cache using docker/build-push-action with GitHub Actions cache (cache-from/cache-to type=gha). This way unchanged layers are reused between deploys, saving ~3-5 minutes when only application code changes.","status":"open","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-28T00:49:40.596410633+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T00:49:40.596410633+07:00"}
{"id":"vanilla-mafia-82","title":"Feature toggle system","description":"Implement a lightweight feature toggle mechanism for the app. Research alternatives to Flipper (which has concerning pricing). Consider building a simple custom solution — e.g. a FeatureToggle model backed by a DB table with key/value pairs and a simple API like Feature.enabled?(:require_approval). Should replace the current Rails.application.config-based approach used in PlayerClaim.require_approval? and be extensible for future flags.","status":"open","priority":2,"issue_type":"feature","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-28T09:02:36.374535778+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T09:02:36.374535778+07:00"}
{"id":"vanilla-mafia-83","title":"Add Docker layer caching to deploy workflow","description":"Configure Kamal builder to use GitHub Actions cache (type=gha) and add required setup steps to the deploy workflow. This reuses unchanged Docker layers between deploys.","status":"closed","priority":2,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-28T14:38:44.443197341+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-28T14:39:16.467040053+07:00","closed_at":"2026-02-28T14:39:16.467040053+07:00","close_reason":"Added GHA cache config to Kamal builder and setup steps to deploy workflow"}
{"id":"vanilla-mafia-9","title":"Create all database migrations","description":"Create migrations for players, roles, games, ratings, awards, player_awards with proper constraints and indexes","status":"closed","priority":0,"issue_type":"task","owner":"denis.kiselyov@gmail.com","created_at":"2026-02-17T13:20:09.418587971+07:00","created_by":"Denis Kiselev","updated_at":"2026-02-17T13:22:28.356167572+07:00","closed_at":"2026-02-17T13:22:28.356167572+07:00"}
