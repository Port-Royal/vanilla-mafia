<h1 class="text-3xl font-bold text-maroon mb-6"><%= @player.name %></h1>

<% if user_signed_in? %>
  <% if @player.claimed_by?(current_user) %>
    <div class="mb-6">
      <%= link_to t(".edit_profile"), edit_profile_path, class: "text-maroon hover:underline font-medium" %>
    </div>
  <% elsif (existing_claim = current_user.player_claims.find_by(player: @player)) %>
    <% if existing_claim.pending? %>
      <p class="text-gray-600 italic mb-6">
        <%= existing_claim.dispute? ? t(".dispute_pending") : t(".claim_pending") %>
      </p>
    <% end %>
  <% elsif @player.claimed? && !current_user.admin? && !current_user.claimed_player? && !current_user.pending_dispute? %>
    <div class="mb-6">
      <%= link_to t(".dispute_player"), new_player_dispute_path(@player),
            class: "bg-maroon text-white px-4 py-2 rounded hover:bg-maroon/90 font-medium" %>
    </div>
  <% elsif !@player.claimed? && !current_user.claimed_player? && !current_user.pending_claim? %>
    <div class="mb-6">
      <%= button_to t(".claim_player"), player_claim_path(@player),
            data: { turbo_confirm: t(".claim_confirm") },
            class: "bg-maroon text-white px-4 py-2 rounded hover:bg-maroon/90 font-medium" %>
    </div>
  <% end %>
<% end %>

<% @games_by_season.each do |season, games| %>
  <h2 class="text-xl font-bold text-maroon mt-6 mb-3"><%= t("common.season") %> <%= season %></h2>
  <ul class="list-disc list-inside space-y-1 ml-2">
    <% games.each do |game| %>
      <li><%= link_to game.in_season_name, game_path(game), class: "text-maroon hover:underline" %></li>
    <% end %>
  </ul>
<% end %>

<%= render "shared/pagy_nav", pagy: @pagy %>

<% if @player_awards.any? %>
  <h2 class="text-xl font-bold text-maroon mt-8 mb-3"><%= t(".awards") %></h2>
  <ul class="list-disc list-inside space-y-1 ml-2">
    <% @player_awards.each do |player_award| %>
      <li><%= player_award.award.title %></li>
    <% end %>
  </ul>
<% end %>
