<section class="mb-10">
  <h2 class="text-2xl font-bold text-maroon mb-4"><%= t(".by_series") %></h2>

  <div class="scroll-wrapper">
    <table class="data-table">
      <thead>
        <tr>
          <th><%= t(".date") %></th>
          <th><%= t(".season") %></th>
          <th><%= t(".series") %></th>
          <th><%= t(".games") %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @games_by_series.each do |series, games| %>
          <tr>
            <td><%= games.first.played_on %></td>
            <td><%= @season %></td>
            <td><%= series %></td>
            <td>
              <% games.each do |game| %>
                <span><%= link_to game.game_number, game_path(game), class: "text-maroon hover:underline" %></span>
              <% end %>
            </td>
            <td><%= link_to t(".view"), season_series_path(season_number: @season, number: series),
                  class: "text-maroon hover:underline" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</section>

<section>
  <h2 class="text-2xl font-bold text-maroon mb-4"><%= t(".by_players") %></h2>

  <div class="scroll-wrapper">
    <table id="players-table" class="data-table">
      <thead>
        <tr>
          <th><%= t(".rank") %></th>
          <th><%= t(".player") %></th>
          <th><%= t(".rating") %></th>
          <th><%= t(".games") %></th>
          <th><%= t(".win_rate") %></th>
        </tr>
      </thead>
      <tbody>
        <% @players.each_with_index do |player, index| %>
          <tr>
            <td><%= @pagy.from + index %></td>
            <td><%= link_to player.name, player_path(player) %></td>
            <td><%= player.total_rating %></td>
            <td><%= player.games_count %></td>
            <td><%= win_percentage(player) %>%</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <%= render "shared/pagy_nav", pagy: @pagy %>
</section>
